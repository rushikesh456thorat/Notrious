{% comment %}Product Template{% endcomment %}
<!doctype html>
<html lang="en">
  <head>
    <style>
                  * {
                    margin: 0;
                    padding: 0;
                    box-sizing: border-box;
                  }

                  body {
                    width: 100%;
                    min-height: 100vh;
                  }

                  .product-container {
                    width: 100%;
                    max-width: 1200px;
                    margin: 0 auto;
                    padding: 20px;
                  }

                  .product-content {
                    display: flex;
                    flex-direction: column;
                    gap: 30px;
                  }

                  /* Header Section */
                  .product-head {
                    display: flex;
                    flex-direction: column;
                    gap: 30px;
                  }

                  @media (min-width: 768px) {
                    .product-head {
                      flex-direction: row;
                      gap: 40px;
                    }
                  }

                  /* Left Side */
                  .head-left {
                    width: 100%;
                  }

                  @media (min-width: 768px) {
                    .head-left {
                      width: 50%;
                    }
                  }

                  .product-main-img {
                    width: 100%;
                    margin-bottom: 20px;
                  }

                  .product-main-img .img {
                    width: 100%;
                    height: auto;
                    border-radius: 15px;
                    object-fit: cover;
                  }

                  /* Image Stack */
                  .product-image-stack {
                    width: 100%;
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    margin-top: 20px;
                  }

                  .img-stack-list {
                    display: flex;
                    gap: 10px;
                    overflow-x: auto;
                    padding: 10px 0;
                    scrollbar-width: none;
                    -ms-overflow-style: none;
                  }

                  .img-stack-list::-webkit-scrollbar {
                    display: none;
                  }

                  .img-stack-item {
                    flex: 0 0 80px;
                    width: 80px;
                    height: 80px;
                    padding: 2px;
                    overflow: hidden;
                  }

                  .img-stack-item img {
                    width: 100%;
                    height: 100%;
                    border-radius: 10px;
                    object-fit: cover;
                  }

                  /* Navigation Buttons */
                  .left-scroll,
                  .right-scroll {
                    width: 30px;
                    height: 30px;
                    border-radius: 50%;
                    border: 1px solid #2d2d2d;
                    background: transparent;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                  }

                  /* Right Side */
                  .head-right {
                    width: 100%;
                    padding: 20px 0;
                  }

                  @media (min-width: 768px) {
                    .head-right {
                      width: 50%;
                      padding: 0;
                    }
                  }

                  #product-title {
                    font-size: 24px;
                    margin-bottom: 15px;
                  }

                  @media (min-width: 768px) {
                    #product-title {
                      font-size: 32px;
                    }
                  }

                  /* Features List */
                  .product-features-list {
                    list-style: none;
                    margin: 20px 0;
                  }

                  .product-feature-item {
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    margin-bottom: 10px;
                  }

                  /* Cart Button */
                  .cart-btn {
                    width: 100%;
                    height: 50px;
                    background-color: black;
                    color: white;
                    border: none;
                    border-radius: 10px;
                    cursor: pointer;
                    font-size: 16px;
                    margin: 20px 0;
                  }

                  /* Delivery Section */
                  .product-delivery {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                    gap: 20px;
                    margin-top: 30px;
                  }

                  .delivery-item {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    text-align: center;
                  }

                  /* Product Center */
                  .product-center {
                    margin: 50px 0;
                    display: flex;
                    flex-direction: column;
                    gap: 50px;
                  }

                  .product-paragraph {
                    display: flex;
                    flex-direction: column;
                    gap: 30px;
                  }

                  @media (min-width: 768px) {
                    .product-paragraph {
                      flex-direction: row;
                      gap: 40px;
                    }

                    .product-paragraph.reverse {
                      flex-direction: row-reverse;
                    }
                  }

                  .para-img {
                    width: 100%;
                  }

                  @media (min-width: 768px) {
                    .para-img {
                      width: 50%;
                    }
                  }

                  .para-img img {
                    width: 100%;
                    height: auto;
                    border-radius: 10px;
                  }

                  .para-content {
                    width: 100%;
                  }

                  @media (min-width: 768px) {
                    .para-content {
                      width: 50%;
                      display: flex;
                      flex-direction: column;
                      justify-content: center;
                    }
                  }

                  .para-heading h2 {
                    font-size: 24px;
                    margin-bottom: 20px;
                  }

                  /* Review Section */
                  .product-review-section {
                    margin: 50px 0;
                  }

                  .size-6 {
                    width: 25px;
                    height: 25px;
                    margin: 0;
                    padding: 0;
                  }

                  .section-heading {
                    text-align: center;
                    font-size: 24px;
                    margin-bottom: 20px;
                  }

               .review-list {
        list-style: none;
        display: flex;
        gap: 24px;
        padding: 0 10px;
        margin: 0;
        overflow-x: auto;
        scroll-snap-type: x mandatory;
        scroll-padding: 16px;
        -webkit-overflow-scrolling: touch;
      }

      .review-item {
        scroll-snap-align: start;
        width: 260px;
        min-height: 360px;
        background-color: #ffffff;
        padding: 16px;
        border-radius: 16px;
        flex-shrink: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-between;
        border: 1px solid #e0e0e0;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
        transition: transform 0.3s ease;
      }

      .review-item:hover {
        transform: translateY(-4px);
      }

      .review-item-img {
        width: 100%;
        height: 140px;
        overflow: hidden;
        border-radius: 12px;
        margin-bottom: 12px;
      }

      .review-item-img img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 12px;
      }

      .review-des {
        font-style: italic;
        font-size: 14px;
        text-align: center;
        color: #444;
        line-height: 1.5;
        margin-bottom: 10px;
      }

      .review-star {
        margin: 8px 0;
        text-align: center;
        font-size: 14px;
        color: #f5a623; /* golden star color */
      }

      .customer-info {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-top: 10px;
      }

      .profile-pic img {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        object-fit: cover;
        border: 1px solid #ddd;
      }

      .customer-name p {
        font-size: 13px;
        color: #333;
        font-weight: 500;
      }

      /* Mobile Responsive Tweaks */
      @media screen and (max-width: 600px) {
        .review-item {
          width: 220px;
          min-height: 330px;
          padding: 14px;
        }

        .review-item-img {
          height: 120px;
        }

        .review-des {
          font-size: 13px;
        }

        .customer-name p {
          font-size: 12px;
        }
      }


                  .review-list::-webkit-scrollbar {
                    display: none;
                  }
                  .selected{
                    border: 2px solid #006dd9;
                  }



                  /* Footer Section */
                  .footer-product {
                    text-align: center;
                    padding: 50px 20px;
                    max-width: 800px;
                    margin: 0 auto;
                  }

                  .footer-heading h2 {
                    font-size: 24px;
                    margin-bottom: 20px;
                  }

                  .footer-heading p {
                    margin-bottom: 30px;
                  }

                  @media (max-width: 480px) {
                    .product-container {
                      padding: 10px;
                    }

                    #product-title {
                      font-size: 20px;
                    }

                    .img-stack-item {
                      flex: 0 0 60px;
                      width: 60px;
                      height: 60px;
                    }

                    .review-item {
                      flex: 0 0 280px;
                    }

                    .para-heading h2 {
                      font-size: 20px;
                    }


                  }

                  .delivery-icon svg {
                    width: 30px;
                    height: 30px;
                    color: black;
                  }
    </style>
  </head>

  <body>
    <div class="product-container">
      <div class="product-content">
        <div class="product-head">
          <div class="head-left">
            <div class="product-main-img">
              <!-- Main Product Image -->
              <img
                id="sourceImage"
                class="img"
                src="{{ product.featured_image | img_url: 'large' }}"
                alt="{{ product.title }}"
              >
            </div>
            <div class="product-image-stack">
              <!-- Scroll Buttons -->
              <button id="leftButton" class="left-scroll">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  view-box="0 0 24 24"
                  stroke-width="{1.5}"
                  stroke="currentColor"
                  class="size-6"
                >
                  <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
                </svg>
              </button>
              <!-- Image Stack -->
              <ul id="imageStack" class="img-stack-list">
                {% for image in product.images %}
                  <li class="img-stack-item">
                    <img src="{{ image | img_url: 'medium' }}" alt="{{ product.title }}">
                  </li>
                {% endfor %}
              </ul>
              <button id="rightButton" class="right-scroll">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  view-box="0 0 24 24"
                  stroke-width="{1.5}"
                  stroke="currentColor"
                  class="size-6"
                >
                  <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3" />
                </svg>
              </button>
            </div>
          </div>

          <div class="head-right">
            <!-- Product Title -->
            <h4 id="product-title">{{ product.title }}</h4>
            <!-- Product Description -->
            <p>{{ product.description }}</p>

            <!-- Product Features (from Metafield) -->
            <div class="product-features">
              <ul class="product-features-list">
                {% assign features_line = product.metafields.custom.features_line.value %}
                {% for feature in features_line %}
                  <li class="product-feature-item">
                    <span class="feature-icon">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        view-box="0 0 24 24"
                        stroke-width="{1.5}"
                        stroke="currentColor"
                        class="size-6"
                      >
                        <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" />
                      </svg>
                    </span>
                    <span class="feature-text">{{ feature }}</span>
                  </li>
                {% endfor %}
              </ul>
            </div>

            <!-- Add to Cart Button -->
            <div class="cart-button">
              <form action="/cart/add" method="post">
                <input type="hidden" name="id" value="{{ product.variants.first.id }}">
                <input type="submit" value="Add to Cart" class="cart-btn">
              </form>
            </div>

            <!-- Delivery Information -->
            <div class="product-delivery">
              <div class="delivery-item">
                <div class="delivery-icon">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns-xlink="http://www.w3.org/1999/xlink"
                    fill="currentColor"
                    version="1.1"
                    id="Capa_1"
                    width="800px"
                    height="800px"
                    viewBox="0 0 396.539 396.539"
                    xml-space="preserve"
                  >
                    <g>
                      <g>
                        <path d="M264.114,170.801c0.019-1.295-0.594-2.521-1.639-3.283L115.17,59.814c-1.377-1.005-3.236-1.029-4.635-0.062    l-66.141,45.693c-1.08,0.747-1.727,1.978-1.727,3.291c0,1.313,0.646,2.544,1.727,3.291l151.602,104.733    c0.684,0.473,1.479,0.709,2.273,0.709s1.59-0.236,2.273-0.709l61.844-42.725C263.454,173.301,264.097,172.096,264.114,170.801z" />
                        <path d="M361.13,128.798c-1.316-0.689-2.908-0.594-4.134,0.251L208.377,231.727c-1.08,0.746-1.727,1.978-1.727,3.291v157.521    c0,1.486,0.826,2.853,2.143,3.541c0.584,0.308,1.222,0.459,1.857,0.459c0.799,0,1.594-0.239,2.273-0.709l148.619-102.676    c1.082-0.747,1.727-1.979,1.727-3.291V132.34C363.271,130.854,362.446,129.489,361.13,128.798z" />
                        <path d="M188.164,231.727L39.543,129.05c-1.223-0.845-2.813-0.941-4.131-0.251c-1.316,0.69-2.143,2.055-2.143,3.542v157.522    c0,1.313,0.646,2.544,1.727,3.291l148.619,102.676c0.682,0.47,1.477,0.709,2.273,0.709c0.637,0,1.275-0.151,1.859-0.459    c1.316-0.688,2.141-2.055,2.141-3.541V235.018C189.89,233.704,189.246,232.473,188.164,231.727z" />
                        <path d="M133.998,50.003l147.307,107.703c0.703,0.514,1.531,0.771,2.36,0.771c0.793,0,1.589-0.236,2.273-0.709l66.207-45.742    c1.082-0.747,1.727-1.977,1.727-3.291c0-1.314-0.645-2.544-1.727-3.291L200.543,0.708c-1.366-0.945-3.18-0.945-4.546,0    l-61.912,42.775c-1.066,0.736-1.709,1.942-1.727,3.237S132.953,49.241,133.998,50.003z" />
                      </g>
                    </g>
                  </svg>
                </div>
                <div class="delivery-des">
                  <p>Free return</p>
                </div>
              </div>
              <div class="delivery-item">
                <div class="delivery-icon">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="{1.5}"
                    stroke="currentColor"
                    class="size-6"
                  >
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12" />
                  </svg>
                </div>
                <div class="delivery-des">
                  <p>Secure Delivery</p>
                </div>
              </div>
              <div class="delivery-item">
                <div class="delivery-icon">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns-xlink="http://www.w3.org/1999/xlink"
                    version="1.1"
                    width="256"
                    height="256"
                    viewBox="0 0 256 256"
                    xml-space="preserve"
                  >
                    <defs></defs>
                    <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)">
                      <path d="M 43.131 54.997 c -0.762 0 -1.524 -0.29 -2.104 -0.87 l -7.625 -7.624 c -1.16 -1.16 -1.16 -3.048 0 -4.209 l 2.25 -2.25 c 1.16 -1.16 3.047 -1.16 4.208 0 l 3.271 3.271 l 7.009 -7.009 c 1.123 -1.123 3.084 -1.125 4.209 0 l 2.249 2.25 c 1.16 1.16 1.16 3.048 0 4.208 L 45.235 54.127 C 44.655 54.707 43.893 54.997 43.131 54.997 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: currentColor; fill-rule: nonzero; opacity: 1" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                      <path d="M 75.712 12.984 C 64.973 11.03 55.602 6.991 47.859 0.979 c -1.684 -1.307 -4.035 -1.307 -5.719 0 C 34.398 6.991 25.028 11.03 14.288 12.984 h 0 c -2.231 0.405 -3.85 2.352 -3.85 4.628 v 32.527 c 0 17.479 12.668 32.98 32.272 39.492 c 0.738 0.245 1.514 0.368 2.29 0.368 s 1.552 -0.123 2.29 -0.368 c 19.604 -6.511 32.271 -22.013 32.271 -39.492 V 17.612 C 79.562 15.335 77.942 13.389 75.712 12.984 z M 45 65.5 c -11.855 0 -21.5 -9.645 -21.5 -21.5 c 0 -11.855 9.645 -21.5 21.5 -21.5 c 11.855 0 21.5 9.645 21.5 21.5 C 66.5 55.855 56.855 65.5 45 65.5 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: currentColor; fill-rule: nonzero; opacity: 1" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                    </g>
                  </svg>
                </div>
                <div class="delivery-des">
                  <p>30 Days Money Back Guarantee</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Product Paragraphs (from Metafield) -->
      <div class="product-center">
        {% assign paragraphs = product.metafields.custom.paragraph.value %}
        {% assign paragraph_titles = product.metafields.custom.paragraph_titles.value %}
        {% for paragraph in paragraphs %}
          <div class="product-paragraph {% if forloop.first %}reverse{% endif %}">
            <div class="para-img">
              <img src="{{ product.images[forloop.index0] | img_url: 'large' }}" alt="{{ product.title }}">
            </div>
            <div class="para-content">
              <div class="para-heading">
                <h2>{{ paragraph_titles[forloop.index0] }}</h2>
              </div>
              <p>{{ paragraph }}</p>
              <div class="cart-button">
                <form action="/cart/add" method="post">
                  <input type="hidden" name="id" value="{{ product.variants.first.id }}">
                  <input type="submit" value="Add to Cart" class="cart-btn">
                </form>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>

      <!-- Product Reviews -->
      <div class="product-review-section">
        <h5 class="section-heading">Our Customer Reviews</h5>
        <p class="review-star">⭐⭐⭐⭐⭐</p>
        <div style="display: flex; align-items: center;">
          <button class="left-scroll" onclick="Pscroll(-200);">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              view-box="0 0 24 24"
              stroke-width="{1.5}"
              stroke="currentColor"
              class="size-6"
            >
              <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
            </svg>
          </button>
          <ul id="scrollContainer" class="review-list">
            {% assign reviews = product.metafields.custom.reviews.value %}
            {% for review in reviews %}
              <li class="review-item">
                <div class="review-item-img">
                  <img src="{{ review.contentImage }}" alt="Review Image">
                </div>

                <p class="review-des">{{ review.content }}</p>

                <p class="review-star">⭐⭐⭐⭐⭐</p>

                <div class="customer-info">
                  <div class="profile-pic">
                    <img src="{{ review.profilePic }}" alt="{{ review.author }}">
                  </div>
                  <div class="customer-name">
                    <p>{{ review.author }}</p>
                  </div>
                </div>
              </li>
            {% endfor %}
          </ul>

          <button class="right-scroll" onclick="Pscroll(200);">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              view-box="0 0 24 24"
              stroke-width="{1.5}"
              stroke="currentColor"
              class="size-6"
            >
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3" />
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Footer Section (from Metafield) -->
    <div class="footer-product">
      <div class="footer-heading">
        <h2>{{ product.metafields.custom.footer_title.value }}</h2>
        <p>{{ product.metafields.custom.footer_desc.value }}</p>
      </div>
      <div class="cart-button">
        <form action="/cart/add" method="post">
          <input type="hidden" name="id" value="{{ product.variants.first.id }}">
          <input type="submit" value="Add to Cart" class="cart-btn">
        </form>
      </div>
    </div>
  </body>
  <script>
    // Scroll left by 85px
    function scrollLeft() {
      const imageStack = document.getElementById('imageStack');
      if (imageStack) {
        imageStack.scrollBy({ left: -85, behavior: "smooth" });
      }
    }

    // Scroll right by 85px
    function scrollRight() {
      const imageStack = document.getElementById('imageStack');
      if (imageStack) {
        imageStack.scrollBy({ left: 85, behavior: "smooth" });
      }
    }

    // Scroll container by a given offset
    function Pscroll(scrollOffset) {
      const scrollContainer = document.getElementById('scrollContainer');
      if (scrollContainer) {
        scrollContainer.scrollBy({
          left: scrollOffset,
          behavior: "smooth",
        });
      }
    }


    // Handle image click and set selected image
    let selectedImageIndex = 0;


    // Event listeners for buttons and images
    document.addEventListener('DOMContentLoaded', function () {
      const leftButton = document.getElementById('leftButton');
      const rightButton = document.getElementById('rightButton');
      const imageStackList = document.getElementById('imageStack');
      const imagesInStack = imageStackList.querySelectorAll('img');
      const sourceImage = document.getElementById('sourceImage')

      if (leftButton) {
        leftButton.addEventListener('click', scrollLeft);
      }

      if (rightButton) {
        rightButton.addEventListener('click', scrollRight);
      }



      imagesInStack.forEach(function (img, index) {
        img.addEventListener('click', function () {
          // Remove 'selected' class from all images
          imagesInStack.forEach(function (image) {
            image.classList.remove('selected');
          });

          // Add 'selected' class to clicked image
          img.classList.add('selected');
          sourceImage.src = img.src
        });
      });
    })
  </script>
</html>
